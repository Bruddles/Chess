function allowDrop(ev){ev.preventDefault()}function drag(ev){ev.dataTransfer.setData("text/html",ev.target.id)}function drop(ev){ev.preventDefault();var oldPosition=[],newPosition=[],data=ev.dataTransfer.getData("text/html");oldPosition=findPosition(data),console.log(data),console.log(oldPosition),console.log(ev.target.id),ev.target.appendChild(document.getElementById(data)),piecePos[oldPosition[1]][oldPosition[0]]=0,newPosition=findArrayCoords(ev.target.id),piecePos[newPosition[1]][newPosition[0]]=data,previousMoves.push([data,findCoords(oldPosition),ev.target.id])}function higlightMoves(ev){var position=[],possibleMoves=[];switch(position=findPosition(ev.target.id),ev.target.className){case"pawn":break;case"rook":break;case"knight":var moveTransforms=[[1,2],[-1,2],[1,-2],[-1,-2]];possibleMoves=transform(position,moveTransforms);break;case"bishop":break;case"queen":break;case"king":}for(var i=0;i<possibleMoves.length;i++)$("#"+findCoords(possibleMoves[i])).css("background-color","yellow")}function findPosition(id){for(var position=[],i=0;i<piecePos.length;i++)-1!==piecePos[i].indexOf(id)&&(position.push(piecePos[i].indexOf(id)),position.push(i));return position}function findCoords(position){var coords="";switch(position[0]){case 0:coords="a";break;case 1:coords="b";break;case 2:coords="c";break;case 3:coords="d";break;case 4:coords="e";break;case 5:coords="f";break;case 6:coords="g";break;case 7:coords="h"}return coords+=position[1]+1}function findArrayCoords(position){var coords=[];switch(position.toString().substring(0,1)){case"a":coords.push(0);break;case"b":coords.push(1);break;case"c":coords.push(2);break;case"d":coords.push(3);break;case"e":coords.push(4);break;case"f":coords.push(5);break;case"g":coords.push(6);break;case"h":coords.push(7)}return coords.push(Number(position.toString().substring(1,2))-1),coords}function transform(position,moveTransforms){for(var possibleMoves=[],i=0;i<moveTransforms.length;i++){var move;move=[position[0]+moveTransforms[i][0],position[1]+moveTransforms[i][1]],(move[0]>=0||move[0]<8||move[1]>=0||move[1]<8)&&possibleMoves.push(move)}return possibleMoves}function WebSocketTest(){if("WebSocket"in window){alert("WebSocket is supported by your Browser!");var ws=new WebSocket("ws://localhost:9998/echo");ws.onopen=function(){ws.send("Message to send"),alert("Message is sent...")},ws.onmessage=function(evt){evt.data;alert("Message is received...")},ws.onclose=function(){alert("Connection is closed...")}}else alert("WebSocket NOT supported by your Browser!")}var socket=io.connect("http://127.0.0.1:1337/"),app=app||{},piecePos=[["WR1","WN1","WB1","WK1","WQ1","WB2","WN2","WR2"],["WP1","WP2","WP3","WP4","WP5","WP6","WP7","WP8"],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],["BP1","BP2","BP3","BP4","BP5","BP6","BP7","BP8"],["BR1","BN1","BB1","BK1","BQ1","BB2","BN2","BR2"]],previousMoves=[];